description = "discuss given issue or feature"
prompt = """
## Goal
Discuss following issue or feature: 
{{args}}

Output a brief task document about the small change, or a rich RFC document about the large change.

## Workflow
1. Understand the issue/feature
- Get technical background by reading design documents in `docs/`, e.g. `docs/architecture.md`, `docs/transaction-system.md`.
- Clarify requirements from conversation context.
- Research the codebase to understand impact.

2. Assess Size
| Small | Median | Large |
|-------|-------|--------|
| 1-3 files, one session | Many files, multiple phases |

3. Describe solution
- For small issues/features:
    - Create a document from template (`docs/tasks/NNNNNN-<issue/feature>.md`) and fill the content.
    ```bash
    cp docs/tasks/000000-template.md docs/tasks/NNNNNN-<issue/feature>.md
    ```
    - Describe the goal, solution, impacts and open questions.
    - Do not modify other files and close the discussion.

- For median issues/features:
    - divide into smaller issues/features and pick one which has few dependency.
    - Create a document for it, following above instructions.
    - List all other issues in open question section in the document.
    - Do not modify other files and close the discussion.

4. Create Plan
This step is **ONLY** for large issues/features.
- Create a RFC document from template (`docs/rfcs/NNNN-<issue/feature>.md`).
- Do not dive too deep into details. Provide a basic solution is enough for further discussion.

**RFC Creation**:
    - Copy the template and fill it in:
    ```bash
    cp docs/rfcs/0000-template.md docs/rfcs/NNNN-<issue/feature>.md
    ```
    - Use next available number.
    - Key sections to complete.
        - Summary: One paragraph explaining the decision
        - Context: Why this is needed
        - Decision: Technical details of the approach
        - Implementation Phases: Break into independently-committable chunks
        - Consequences: Trade-offs and implications

5. Get Approval

If RFC file is created, continue discussion with user.
Open to answer user's questions and modify the document accordingly.
Explictly ask for user's approval if all known issues are confirmed.
If approved, define implementation phases (each should fit in one session).

6. Create tracking

Follow instructions described in `docs/process/issue-tracking.md`, especially for epic/sub-issue creation.
Update RFC with epic issue ID.
Each phase should be assigned one sub-issue.

## Important

- Design only - do **NOT** write implementation code.
- Do **NOT** create github issues until user approves.
- Infer scope and priority from conversation context.
- Each phase should fit in one context window.
- Leave original template file as it is: do not modify or remove.

"""